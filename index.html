<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Find answers, guides, and tutorials to get the most out of AppClust. Comprehensive help center with step-by-step instructions." />
  <meta name="keywords" content="AppClust, help, support, documentation, tutorials, guides" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Help Center | AppClust Support" />
  <meta property="og:description" content="Find answers, guides, and tutorials to get the most out of AppClust" />
  <meta property="og:url" content="" />
  <meta name="twitter:card" content="summary_large_image" />
  <title>Help Center | AppClust Support</title>
  <link rel="icon" type="image/svg+xml" href="https://www.appclust.com/logo.svg" />
  <link rel="alternate icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 810 810'><g clip-path='url(%23clip1)'><path fill='%238100FF' d='M 81 685.554688 L 81.023438 685.554688 L 145.804688 685.578125 L 145.828125 685.554688 L 275.414062 461.113281 L 372.597656 629.449219 L 307.769531 629.449219 L 275.390625 573.347656 L 210.609375 685.554688 L 469.78125 685.554688 L 275.390625 348.882812 Z M 81 685.554688 '/></g><g clip-path='url(%23clip2)'><path fill='%238100FF' d='M 631.792969 517.21875 L 631.769531 517.21875 L 599.390625 573.347656 L 631.769531 629.449219 L 566.964844 629.449219 L 372.597656 292.78125 L 405 236.675781 L 437.378906 292.78125 L 502.207031 292.78125 L 405 124.421875 L 307.792969 292.753906 L 307.792969 292.78125 L 307.816406 292.78125 L 534.5625 685.554688 L 534.585938 685.554688 L 534.585938 685.578125 L 729 685.578125 Z M 631.792969 517.21875 '/></g><defs><clipPath id='clip1'><path d='M 81 348 L 470 348 L 470 685.335938 L 81 685.335938 Z M 81 348 '/></clipPath><clipPath id='clip2'><path d='M 307 124.335938 L 729 124.335938 L 729 685.335938 L 307 685.335938 Z M 307 124.335938 '/></clipPath></defs></svg>" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    // Suppress Tailwind CDN production warning for static sites
    if (window.console && console.warn) {
      const originalWarn = console.warn;
      console.warn = function(...args) {
        if (args[0] && typeof args[0] === 'string' && args[0].includes('cdn.tailwindcss.com')) {
          return; // Suppress Tailwind CDN warning
        }
        originalWarn.apply(console, args);
      };
    }
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
          },
          colors: {
            'appclust': '#8100FF',
            'appclust-dark': '#6a00cc',
            'appclust-light': '#9d33ff',
          }
        }
      }
    }
  </script>
  <style>
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }
    
    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 10px;
    }
    ::-webkit-scrollbar-track {
      background: #f1f5f9;
    }
    ::-webkit-scrollbar-thumb {
      background: #cbd5e1;
      border-radius: 5px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: #94a3b8;
    }

    /* Smooth animations */
    .article-card {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .article-card:hover {
      transform: translateY(-4px);
    }

    /* Modal animation */
    @keyframes modalSlideIn {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .modal-content {
      animation: modalSlideIn 0.3s ease-out;
    }

    /* WhatsApp Button Animation */
    @keyframes ping {
      75%, 100% {
        transform: scale(1.5);
        opacity: 0;
      }
    }
    .animate-ping {
      animation: ping 2s cubic-bezier(0, 0, 0.2, 1) infinite;
    }

    @keyframes modalSlideIn {
      from {
        opacity: 0;
        transform: scale(0.95) translateY(-10px);
      }
      to {
        opacity: 1;
        transform: scale(1) translateY(0);
      }
    }
    .animate-modalSlideIn {
      animation: modalSlideIn 0.3s ease-out;
    }

    /* Markdown content styling */
    .markdown-content h1 {
      font-size: 1.875rem;
      font-weight: 700;
      color: #0f172a;
      margin-top: 2rem;
      margin-bottom: 1rem;
    }
    .markdown-content h2 {
      font-size: 1.5rem;
      font-weight: 600;
      color: #0f172a;
      margin-top: 1.5rem;
      margin-bottom: 0.75rem;
    }
    .markdown-content h3 {
      font-size: 1.25rem;
      font-weight: 600;
      color: #0f172a;
      margin-top: 1.25rem;
      margin-bottom: 0.5rem;
    }
    .markdown-content p {
      color: #475569;
      margin-bottom: 1rem;
      line-height: 1.75;
    }
    .markdown-content ul, .markdown-content ol {
      list-style-type: disc;
      list-style-position: inside;
      margin-bottom: 1rem;
      margin-left: 1rem;
      color: #475569;
    }
    .markdown-content li {
      margin-bottom: 0.5rem;
    }
    .markdown-content img {
      border-radius: 0.75rem;
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      margin: 1.5rem 0;
      max-width: 100%;
      height: auto;
      display: block;
    }
    .markdown-content code {
      background-color: #f1f5f9;
      color: #8100FF;
      padding: 0.25rem 0.5rem;
      border-radius: 0.25rem;
      font-size: 0.875rem;
      font-family: 'Monaco', 'Courier New', monospace;
    }
    .markdown-content pre {
      background-color: #0f172a;
      color: #f1f5f9;
      padding: 1rem;
      border-radius: 0.75rem;
      overflow-x: auto;
      margin: 1rem 0;
    }
    .markdown-content blockquote {
      border-left: 4px solid #8100FF;
      padding-left: 1rem;
      margin: 1rem 0;
      font-style: italic;
      color: #64748b;
    }
    .markdown-content strong {
      font-weight: 600;
      color: #0f172a;
    }
    
    /* Line clamp utility */
    .line-clamp-2 {
      display: -webkit-box;
      -webkit-line-clamp: 2;
      line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    
    /* Article page specific styles */
    #articlePage article {
      min-height: 100vh;
    }
    
    /* Smooth scroll behavior */
    html {
      scroll-behavior: smooth;
    }
  </style>
</head>
<body class="bg-gradient-to-b from-slate-50 to-white antialiased">
  <!-- Header -->
  <header class="relative bg-gradient-to-br from-appclust via-appclust-dark to-appclust text-white overflow-hidden">
    <!-- Background Pattern -->
    <div class="absolute inset-0 opacity-20">
      <div class="absolute inset-0" style="background-image: radial-gradient(circle at 20% 50%, rgba(255, 255, 255, 0.1) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 50%);"></div>
    </div>
    
    <!-- Navigation Bar -->
    <nav class="relative z-20 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
      <div class="flex items-center justify-between">
        <a href="https://www.appclust.com" class="flex items-center gap-2 group">
          <div class="h-6 w-6 group-hover:scale-110 transition-transform flex items-center justify-center">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 810 810" class="h-full w-full">
              <g clip-path="url(#clip1)">
                <path fill="#ffffff" d="M 81 685.554688 L 81.023438 685.554688 L 145.804688 685.578125 L 145.828125 685.554688 L 275.414062 461.113281 L 372.597656 629.449219 L 307.769531 629.449219 L 275.390625 573.347656 L 210.609375 685.554688 L 469.78125 685.554688 L 275.390625 348.882812 Z M 81 685.554688 " />
              </g>
              <g clip-path="url(#clip2)">
                <path fill="#ffffff" d="M 631.792969 517.21875 L 631.769531 517.21875 L 599.390625 573.347656 L 631.769531 629.449219 L 566.964844 629.449219 L 372.597656 292.78125 L 405 236.675781 L 437.378906 292.78125 L 502.207031 292.78125 L 405 124.421875 L 307.792969 292.753906 L 307.792969 292.78125 L 307.816406 292.78125 L 534.5625 685.554688 L 534.585938 685.554688 L 534.585938 685.578125 L 729 685.578125 Z M 631.792969 517.21875 " />
              </g>
              <defs>
                <clipPath id="clip1"><path d="M 81 348 L 470 348 L 470 685.335938 L 81 685.335938 Z M 81 348 " /></clipPath>
                <clipPath id="clip2"><path d="M 307 124.335938 L 729 124.335938 L 729 685.335938 L 307 685.335938 Z M 307 124.335938 " /></clipPath>
              </defs>
            </svg>
          </div>
          <span class="text-lg font-bold">AppClust</span>
        </a>
        <a href="https://www.appclust.com" class="text-white/90 hover:text-white text-xs sm:text-sm font-medium transition-colors">
          Back to AppClust →
        </a>
      </div>
    </nav>
    
    <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-8 sm:pb-10 pt-4 text-center">
      <div class="inline-flex items-center justify-center w-12 h-12 rounded-xl bg-white/10 backdrop-blur-sm mb-4 border border-white/20">
        <i class="fas fa-life-ring text-2xl text-white"></i>
      </div>
      <h1 class="text-3xl sm:text-4xl lg:text-5xl font-extrabold mb-2 text-white">
        Help Center
      </h1>
      <p class="text-base sm:text-lg text-white/90 max-w-2xl mx-auto">
        Find answers, guides, and tutorials to get the most out of AppClust
      </p>
    </div>
  </header>

  <!-- Search Section -->
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 -mt-6 relative z-20 mb-12">
    <div class="bg-white rounded-2xl shadow-2xl border border-slate-200/50 flex items-center px-6 py-5 focus-within:ring-4 focus-within:ring-appclust/20 focus-within:border-appclust transition-all backdrop-blur-sm">
      <i class="fas fa-search text-appclust text-xl mr-4"></i>
      <input 
        type="text" 
        id="searchInput" 
        placeholder="Search articles, guides, and tutorials..." 
        class="flex-1 text-slate-900 placeholder-slate-400 outline-none text-lg font-medium"
      />
      <div class="hidden sm:flex items-center gap-2 text-xs text-slate-400 ml-4">
        <kbd class="px-2 py-1 bg-slate-100 rounded border border-slate-200">⌘</kbd>
        <kbd class="px-2 py-1 bg-slate-100 rounded border border-slate-200">K</kbd>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div id="mainContent">
    <!-- Homepage Content -->
    <div id="homePage" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-20">
      <!-- Recent Articles Section -->
      <div id="recentSection" style="display: none;">
        <div class="mb-10">
          <div class="flex items-center gap-3 mb-3">
            <div class="w-1 h-8 bg-gradient-to-b from-appclust to-appclust-light rounded-full"></div>
            <div>
              <h2 class="text-3xl font-bold text-slate-900">Recent Articles</h2>
              <p class="text-slate-600 mt-1">Latest updates and guides</p>
            </div>
          </div>
        </div>
        <div id="recentArticles" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
      </div>

      <!-- Search Results Section -->
      <div id="searchResults" class="search-results" style="display: none;">
        <div class="mb-10">
          <div class="flex items-center gap-3 mb-3">
            <div class="w-1 h-8 bg-gradient-to-b from-appclust to-appclust-light rounded-full"></div>
            <div>
              <h2 class="text-3xl font-bold text-slate-900">Search Results</h2>
              <p class="text-sm text-slate-500 mt-1" id="resultsCount"></p>
            </div>
          </div>
        </div>
        <div id="articlesContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
      </div>
    </div>

    <!-- Article Page Content -->
    <div id="articlePage" class="hidden">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="flex flex-col lg:flex-row gap-8">
          <!-- Main Article Content -->
          <article class="flex-1 lg:max-w-3xl">
            <!-- Breadcrumb -->
            <nav class="mb-6" aria-label="Breadcrumb">
              <ol class="flex items-center space-x-2 text-sm">
                <li>
                  <a href="#" onclick="event.preventDefault(); navigateHome();" class="text-slate-500 hover:text-appclust transition-colors">Home</a>
                </li>
                <li class="text-slate-400">
                  <i class="fas fa-chevron-right text-xs"></i>
                </li>
                <li>
                  <span class="text-slate-900 font-medium" id="articleBreadcrumb"></span>
                </li>
              </ol>
            </nav>

            <!-- Article Header -->
            <header class="mb-8">
              <h1 id="articleTitle" class="text-4xl sm:text-5xl font-extrabold text-slate-900 mb-4 leading-tight"></h1>
              <div class="flex items-center gap-4 text-sm text-slate-600">
                <div class="flex items-center gap-2">
                  <i class="fas fa-clock"></i>
                  <span id="articleReadTime">5 min read</span>
                </div>
                <div class="flex items-center gap-2">
                  <i class="fas fa-calendar"></i>
                  <span id="articleDate">Updated recently</span>
                </div>
              </div>
            </header>

            <!-- Article Content -->
            <div id="articleContent" class="prose prose-slate max-w-none">
              <div class="text-center py-12">
                <div class="inline-block w-10 h-10 border-4 border-appclust border-t-transparent rounded-full animate-spin mb-4"></div>
                <p class="text-slate-600">Loading content...</p>
              </div>
            </div>

            <!-- Article Footer -->
            <footer class="mt-12 pt-8 border-t border-slate-200">
              <div class="flex flex-wrap items-center gap-4 mb-6">
                <span class="text-sm font-semibold text-slate-700">Share this article:</span>
                <div class="flex items-center gap-3">
                  <a href="#" id="shareTwitter" class="w-10 h-10 rounded-full bg-slate-100 hover:bg-blue-500 hover:text-white text-slate-600 flex items-center justify-center transition-all" target="_blank" rel="noopener">
                    <i class="fab fa-twitter"></i>
                  </a>
                  <a href="#" id="shareLinkedIn" class="w-10 h-10 rounded-full bg-slate-100 hover:bg-blue-600 hover:text-white text-slate-600 flex items-center justify-center transition-all" target="_blank" rel="noopener">
                    <i class="fab fa-linkedin-in"></i>
                  </a>
                  <a href="#" id="shareFacebook" class="w-10 h-10 rounded-full bg-slate-100 hover:bg-blue-700 hover:text-white text-slate-600 flex items-center justify-center transition-all" target="_blank" rel="noopener">
                    <i class="fab fa-facebook-f"></i>
                  </a>
                  <button id="copyLink" class="w-10 h-10 rounded-full bg-slate-100 hover:bg-appclust hover:text-white text-slate-600 flex items-center justify-center transition-all" title="Copy link">
                    <i class="fas fa-link"></i>
                  </button>
                </div>
              </div>
              <a href="#" id="articleExternalLink" class="inline-flex items-center gap-2 text-appclust hover:text-appclust-dark font-semibold transition-colors" target="_blank" rel="noopener" style="display: none;">
                <i class="fas fa-comments"></i>
                <span>Join the discussion on GitHub</span>
                <i class="fas fa-external-link-alt text-xs"></i>
              </a>
            </footer>
          </article>

          <!-- Right Sidebar -->
          <aside class="lg:w-80 flex-shrink-0">
            <div class="sticky top-8 space-y-8">
              <!-- Related Articles -->
              <div id="relatedArticlesSection" class="bg-white rounded-2xl border border-slate-200 p-6 shadow-sm">
                <h3 class="text-xl font-bold text-slate-900 mb-4 flex items-center gap-2">
                  <div class="w-1 h-6 bg-gradient-to-b from-appclust to-appclust-light rounded-full"></div>
                  Related Articles
                </h3>
                <div id="relatedArticles" class="space-y-4">
                  <!-- Related articles will be inserted here -->
                </div>
              </div>

              <!-- Recent Articles -->
              <div class="bg-white rounded-2xl border border-slate-200 p-6 shadow-sm">
                <h3 class="text-xl font-bold text-slate-900 mb-4 flex items-center gap-2">
                  <div class="w-1 h-6 bg-gradient-to-b from-appclust to-appclust-light rounded-full"></div>
                  Recent Articles
                </h3>
                <div id="sidebarRecentArticles" class="space-y-4">
                  <!-- Recent articles will be inserted here -->
                </div>
              </div>

              <!-- Contact CTA -->
              <div class="bg-gradient-to-br from-slate-50 to-white rounded-2xl border border-slate-200 p-6 shadow-sm">
                <div class="text-center">
                  <div class="inline-flex items-center justify-center w-14 h-14 rounded-full bg-appclust/10 mb-4">
                    <i class="fas fa-headset text-appclust text-xl"></i>
                  </div>
                  <h3 class="text-lg font-bold text-slate-900 mb-2">Need More Help?</h3>
                  <p class="text-sm text-slate-600 mb-4">Our support team is here to assist you</p>
                  <button 
                    id="contactSupportBtn"
                    class="w-full bg-appclust hover:bg-appclust-dark text-white font-semibold py-3 rounded-lg transition-colors shadow-lg"
                  >
                    Contact Support
                  </button>
                </div>
              </div>
            </div>
          </aside>
        </div>
      </div>
    </div>
  </div>

  <!-- WhatsApp Floating Button -->
  <button 
    id="whatsappButton"
    class="fixed bottom-4 right-4 sm:bottom-6 sm:right-6 z-50 group"
    aria-label="Chat with us on WhatsApp"
  >
    <div class="relative">
      <!-- Tooltip (hidden on mobile) -->
      <div class="hidden sm:block absolute right-full mr-4 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none">
        <div class="bg-slate-900 text-white text-sm font-medium px-4 py-2 rounded-lg whitespace-nowrap shadow-xl">
          Chat with us on WhatsApp
          <div class="absolute left-full top-1/2 -translate-y-1/2 border-4 border-transparent border-l-slate-900"></div>
        </div>
      </div>
      
      <!-- Button -->
      <div class="bg-gradient-to-br from-[#25D366] to-[#128C7E] hover:from-[#128C7E] hover:to-[#25D366] w-14 h-14 sm:w-16 sm:h-16 rounded-full shadow-2xl flex items-center justify-center transition-all duration-300 group-hover:scale-110 group-hover:shadow-3xl group-active:scale-95">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" class="w-7 h-7 sm:w-8 sm:h-8">
          <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
        </svg>
      </div>
      
      <!-- Pulse Animation -->
      <div class="absolute inset-0 bg-[#25D366] rounded-full animate-ping opacity-20"></div>
    </div>
  </button>

  <!-- WhatsApp Options Modal -->
  <div id="whatsappModal" class="fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] hidden items-center justify-center p-4 overflow-y-auto">
    <div class="bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-6 sm:p-8 my-8 animate-modalSlideIn">
      <!-- Header -->
      <div class="flex items-center justify-between mb-8">
        <div class="flex items-center gap-4">
          <div class="w-14 h-14 rounded-full bg-gradient-to-br from-[#25D366] to-[#128C7E] flex items-center justify-center shadow-lg">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" class="w-7 h-7">
              <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
            </svg>
          </div>
          <div>
            <h3 class="text-2xl font-bold text-slate-900">How can we help you?</h3>
            <p class="text-sm text-slate-600 mt-1">Choose a support option to get started</p>
          </div>
        </div>
        <button id="closeWhatsappModal" class="w-10 h-10 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 flex items-center justify-center transition-colors">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <!-- Options Grid -->
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6">
        <!-- General Support -->
        <a 
          href="https://wa.me/919633016479?text=Hello%2C%20I%20need%20general%20support%20with%20AppClust." 
          target="_blank" 
          rel="noopener noreferrer"
          class="group relative overflow-hidden rounded-xl border-2 border-slate-200 hover:border-[#25D366] bg-gradient-to-br from-slate-50 to-white p-6 transition-all duration-300 hover:shadow-xl hover:-translate-y-1"
        >
          <div class="absolute top-0 right-0 w-20 h-20 bg-[#25D366]/10 rounded-bl-full"></div>
          <div class="relative">
            <div class="w-14 h-14 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform shadow-lg">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" class="w-7 h-7">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
              </svg>
            </div>
            <h4 class="font-bold text-slate-900 mb-2 text-lg">General Support</h4>
            <p class="text-sm text-slate-600 mb-4">Get help with general questions and inquiries</p>
            <div class="flex items-center text-[#25D366] font-semibold text-sm">
              <span>Start Chat</span>
              <i class="fas fa-arrow-right ml-2 group-hover:translate-x-1 transition-transform"></i>
            </div>
          </div>
        </a>

        <!-- Billing Support -->
        <a 
          href="https://wa.me/919643326479?text=Hello%2C%20I%20need%20help%20with%20billing%20or%20payment%20related%20questions." 
          target="_blank" 
          rel="noopener noreferrer"
          class="group relative overflow-hidden rounded-xl border-2 border-slate-200 hover:border-[#25D366] bg-gradient-to-br from-slate-50 to-white p-6 transition-all duration-300 hover:shadow-xl hover:-translate-y-1"
        >
          <div class="absolute top-0 right-0 w-20 h-20 bg-[#25D366]/10 rounded-bl-full"></div>
          <div class="relative">
            <div class="w-14 h-14 rounded-xl bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform shadow-lg">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" class="w-7 h-7">
                <path d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"/>
              </svg>
            </div>
            <h4 class="font-bold text-slate-900 mb-2 text-lg">Billing Support</h4>
            <p class="text-sm text-slate-600 mb-4">Questions about payments, invoices, or subscriptions</p>
            <div class="flex items-center text-[#25D366] font-semibold text-sm">
              <span>Start Chat</span>
              <i class="fas fa-arrow-right ml-2 group-hover:translate-x-1 transition-transform"></i>
            </div>
          </div>
        </a>

        <!-- Developer Support -->
        <a 
          href="https://wa.me/919160128487?text=Hello%2C%20I%20need%20developer%20support%20or%20technical%20assistance%20with%20AppClust." 
          target="_blank" 
          rel="noopener noreferrer"
          class="group relative overflow-hidden rounded-xl border-2 border-slate-200 hover:border-[#25D366] bg-gradient-to-br from-slate-50 to-white p-6 transition-all duration-300 hover:shadow-xl hover:-translate-y-1"
        >
          <div class="absolute top-0 right-0 w-20 h-20 bg-[#25D366]/10 rounded-bl-full"></div>
          <div class="relative">
            <div class="w-14 h-14 rounded-xl bg-gradient-to-br from-purple-500 to-indigo-600 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform shadow-lg">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" class="w-7 h-7">
                <path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0L19.2 12l-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>
              </svg>
            </div>
            <h4 class="font-bold text-slate-900 mb-2 text-lg">Developer Support</h4>
            <p class="text-sm text-slate-600 mb-4">Technical assistance for developers and integrations</p>
            <div class="flex items-center text-[#25D366] font-semibold text-sm">
              <span>Start Chat</span>
              <i class="fas fa-arrow-right ml-2 group-hover:translate-x-1 transition-transform"></i>
            </div>
          </div>
        </a>

        <!-- Report Bug -->
        <a 
          href="https://wa.me/919633016479?text=Hello%2C%20I%20would%20like%20to%20report%20a%20bug%20or%20issue%20I%20encountered%20in%20AppClust." 
          target="_blank" 
          rel="noopener noreferrer"
          class="group relative overflow-hidden rounded-xl border-2 border-slate-200 hover:border-[#25D366] bg-gradient-to-br from-slate-50 to-white p-6 transition-all duration-300 hover:shadow-xl hover:-translate-y-1"
        >
          <div class="absolute top-0 right-0 w-20 h-20 bg-[#25D366]/10 rounded-bl-full"></div>
          <div class="relative">
            <div class="w-14 h-14 rounded-xl bg-gradient-to-br from-red-500 to-rose-600 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform shadow-lg">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" class="w-7 h-7">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
              </svg>
            </div>
            <h4 class="font-bold text-slate-900 mb-2 text-lg">Report Bug</h4>
            <p class="text-sm text-slate-600 mb-4">Found an issue? Let us know and we'll fix it</p>
            <div class="flex items-center text-[#25D366] font-semibold text-sm">
              <span>Start Chat</span>
              <i class="fas fa-arrow-right ml-2 group-hover:translate-x-1 transition-transform"></i>
            </div>
          </div>
        </a>
      </div>

      <!-- Footer -->
      <div class="pt-6 border-t border-slate-200">
        <p class="text-xs text-slate-500 text-center">
          <i class="fas fa-clock mr-1"></i>
          We typically respond within a few minutes
        </p>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-slate-50 border-t border-slate-200 mt-20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
      <div class="flex flex-col md:flex-row items-center justify-between gap-4">
        <div class="flex items-center gap-3">
          <div class="h-6 w-6 flex items-center justify-center">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 810 810" class="h-full w-full">
              <g clip-path="url(#footer-clip1)">
                <path fill="#8100FF" d="M 81 685.554688 L 81.023438 685.554688 L 145.804688 685.578125 L 145.828125 685.554688 L 275.414062 461.113281 L 372.597656 629.449219 L 307.769531 629.449219 L 275.390625 573.347656 L 210.609375 685.554688 L 469.78125 685.554688 L 275.390625 348.882812 Z M 81 685.554688 " />
              </g>
              <g clip-path="url(#footer-clip2)">
                <path fill="#8100FF" d="M 631.792969 517.21875 L 631.769531 517.21875 L 599.390625 573.347656 L 631.769531 629.449219 L 566.964844 629.449219 L 372.597656 292.78125 L 405 236.675781 L 437.378906 292.78125 L 502.207031 292.78125 L 405 124.421875 L 307.792969 292.753906 L 307.792969 292.78125 L 307.816406 292.78125 L 534.5625 685.554688 L 534.585938 685.554688 L 534.585938 685.578125 L 729 685.578125 Z M 631.792969 517.21875 " />
              </g>
              <defs>
                <clipPath id="footer-clip1"><path d="M 81 348 L 470 348 L 470 685.335938 L 81 685.335938 Z M 81 348 " /></clipPath>
                <clipPath id="footer-clip2"><path d="M 307 124.335938 L 729 124.335938 L 729 685.335938 L 307 685.335938 Z M 307 124.335938 " /></clipPath>
              </defs>
            </svg>
          </div>
          <span class="text-slate-600 text-sm">© 2025 AppClust. All rights reserved.</span>
        </div>
        <div class="flex items-center gap-6">
          <a href="https://www.appclust.com" class="text-slate-600 hover:text-appclust text-sm font-medium transition-colors">
            Visit AppClust
          </a>
          <a href="https://www.appclust.com" class="text-slate-600 hover:text-appclust text-sm font-medium transition-colors">
            Support
          </a>
        </div>
      </div>
    </div>
  </footer>


  <script>
    let articles = [];
    let searchQuery = '';

    // Dynamically discover and load articles from markdown files
    async function loadArticles() {
      try {
        // Try to get list of markdown files from auto-generated index
        let fileList = [];
        try {
          const indexResponse = await fetch('files-index.json');
          if (indexResponse.ok) {
            fileList = await indexResponse.json();
          }
        } catch (e) {
          console.log('files-index.json not found, trying list.json fallback');
        }

        // Fallback to list.json if files-index.json doesn't exist
        if (fileList.length === 0) {
          try {
            const listResponse = await fetch('list.json');
            const listData = await listResponse.json();
            fileList = listData.map(item => item.kb_id || item.url?.split('/').pop()?.replace('.md', ''));
          } catch (e) {
            console.log('list.json also not found');
          }
        }

        // If we still have no files, show error
        if (fileList.length === 0) {
          throw new Error('No file list available');
        }

        // Fetch and parse each markdown file to extract metadata
        articles = await Promise.all(
          fileList.map(async (filename) => {
            const kbId = filename.replace('.md', '');
            const fileUrl = `/files/${kbId}.md`;
            
            try {
              const response = await fetch(fileUrl);
              if (!response.ok) throw new Error('File not found');
              
              const markdown = await response.text();
              
              // Extract title from first heading
              let title = kbId.replace(/_/g, ' ')
                .split(' ')
                .map(word => word.charAt(0).toUpperCase() + word.slice(1))
                .join(' ');
              
              const headingMatch = markdown.match(/^#+\s+(.+)$/m);
              if (headingMatch) {
                title = headingMatch[1]
                  .replace(/\*\*/g, '')
                  .replace(/\[([^\]]+)\]\([^\)]+\)/g, '$1')
                  .trim();
              }
              
              // Extract tags from frontmatter or generate from filename
              let tags = '';
              const frontmatterMatch = markdown.match(/^---\s*\n([\s\S]*?)\n---\s*\n/);
              if (frontmatterMatch) {
                const frontmatter = frontmatterMatch[1];
                const tagsMatch = frontmatter.match(/^tags?:\s*(.+)$/mi);
                if (tagsMatch) {
                  tags = tagsMatch[1].trim();
                }
              }
              
              if (!tags) {
                const words = kbId.split('_').filter(w => w.length > 2);
                tags = words.join(', ');
              }
              
              // Try to find external link
              let externalLink = '';
              const linkMatch = markdown.match(/https?:\/\/github\.com\/[^\/]+\/[^\/]+\/discussions\/\d+/);
              if (linkMatch) {
                externalLink = linkMatch[0];
              }
              
              return {
                kb_id: kbId,
                title: title,
                tags: tags,
                url: fileUrl,
                external_link: externalLink || null
              };
            } catch (error) {
              // If file doesn't exist, return null and filter it out
              return null;
            }
          })
        );

        // Filter out null entries (files that don't exist)
        articles = articles.filter(article => article !== null);
        
        // Sort by filename (newest first - assuming newer files have later alphabetical names)
        articles.sort((a, b) => b.kb_id.localeCompare(a.kb_id));

        // Show last 6 articles on homepage
        showRecentArticles();
      } catch (error) {
        console.error('Error loading articles:', error);
        const isCorsError = error.message.includes('CORS') || 
                           error.message.includes('Failed to fetch') ||
                           window.location.protocol === 'file:';
        
        document.getElementById('recentSection').innerHTML = `
          <div class="col-span-full text-center py-16">
            <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-red-100 mb-4">
              <i class="fas fa-exclamation-triangle text-red-600 text-2xl"></i>
            </div>
            <h3 class="text-2xl font-bold text-slate-900 mb-2">Error Loading Articles</h3>
            ${isCorsError ? `
              <p class="text-slate-600 mb-4"><strong>CORS Error Detected</strong></p>
              <p class="text-slate-600 mb-6">You're opening this file directly from the file system. To test locally, you need to run a local server.</p>
              <div class="bg-slate-50 border border-slate-200 rounded-xl p-6 max-w-2xl mx-auto text-left">
                <p class="font-semibold text-slate-900 mb-3">Quick Fix:</p>
                <ol class="list-decimal list-inside space-y-2 text-slate-600">
                  <li>Open Terminal in the <code class="bg-slate-200 px-2 py-1 rounded">docs</code> folder</li>
                  <li>Run: <code class="bg-slate-200 px-2 py-1 rounded">python3 -m http.server 8000</code></li>
                  <li>Open: <code class="bg-slate-200 px-2 py-1 rounded">http://localhost:8000</code> in your browser</li>
                </ol>
              </div>
              <p class="text-sm text-slate-500 mt-4">Note: This works automatically on GitHub Pages (no server needed).</p>
            ` : `
              <p class="text-slate-600">Unable to load articles. Please refresh the page.</p>
            `}
          </div>
        `;
      }
    }

    // Show last 6 articles
    function showRecentArticles() {
      const recentSection = document.getElementById('recentSection');
      const recentContainer = document.getElementById('recentArticles');
      
      if (articles.length === 0) return;
      
      const recentArticles = articles.slice(0, 6); // First 6 (already sorted newest first)
      
      recentContainer.innerHTML = recentArticles.map(article => createArticleCard(article)).join('');
      recentSection.style.display = 'block';
      
      // Add click handlers - update to use History API routing
      recentContainer.querySelectorAll('.article-card').forEach(card => {
        card.addEventListener('click', () => {
          const kbId = card.dataset.kbId;
          navigateToArticle(kbId);
        });
      });
    }

    // Filter articles by search query
    function getFilteredArticles() {
      if (!searchQuery) return [];
      
      return articles.filter(article => {
        const titleMatch = article.title.toLowerCase().includes(searchQuery.toLowerCase());
        const tagsMatch = article.tags && article.tags.toLowerCase().includes(searchQuery.toLowerCase());
        return titleMatch || tagsMatch;
      });
    }

    // Render search results
    function renderSearchResults() {
      // If we're on an article page, navigate to home first
      const articlePage = document.getElementById('articlePage');
      const homePage = document.getElementById('homePage');
      
      if (!articlePage.classList.contains('hidden')) {
        // We're on an article page, navigate to home first
        navigateHome();
        // Small delay to ensure DOM is updated, then render results
        setTimeout(() => {
          renderSearchResults();
        }, 50);
        return;
      }
      
      // Focus search input if there's a query
      const searchInput = document.getElementById('searchInput');
      if (searchInput && searchQuery.trim()) {
        searchInput.focus();
      }
      
      const searchResults = document.getElementById('searchResults');
      const container = document.getElementById('articlesContainer');
      const resultsCount = document.getElementById('resultsCount');
      const recentSection = document.getElementById('recentSection');
      
      if (!searchQuery.trim()) {
        searchResults.style.display = 'none';
        if (recentSection) {
          recentSection.style.display = 'block';
        }
        return;
      }

      if (recentSection) {
        recentSection.style.display = 'none';
      }
      if (searchResults) {
        searchResults.style.display = 'block';
      }
      
      const filtered = getFilteredArticles();

      if (filtered.length === 0) {
        if (container) {
          container.innerHTML = `
            <div class="col-span-full text-center py-16">
              <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-slate-100 mb-4">
                <i class="fas fa-search text-slate-400 text-2xl"></i>
              </div>
              <h3 class="text-2xl font-bold text-slate-900 mb-2">No articles found</h3>
              <p class="text-slate-600">Try adjusting your search terms or browse recent articles above.</p>
            </div>
          `;
        }
        if (resultsCount) {
          resultsCount.textContent = 'No results found';
        }
        return;
      }

      if (resultsCount) {
        resultsCount.textContent = `${filtered.length} ${filtered.length === 1 ? 'article' : 'articles'} found`;
      }
      if (container) {
        container.innerHTML = filtered.map(article => createArticleCard(article)).join('');

        // Add click handlers - update to use History API routing
        container.querySelectorAll('.article-card').forEach(card => {
          card.addEventListener('click', () => {
            const kbId = card.dataset.kbId;
            navigateToArticle(kbId);
          });
        });
      }
    }

    // Create article card HTML
    function createArticleCard(article) {
      const icon = getArticleIcon(article.tags);
      const iconColors = {
        'fa-sign-in-alt': 'from-appclust to-appclust-light',
        'fa-id-card': 'from-appclust to-appclust-light',
        'fa-file-invoice': 'from-appclust to-appclust-light',
        'fa-box': 'from-appclust to-appclust-light',
        'fa-search': 'from-appclust to-appclust-light',
        'fa-chart-bar': 'from-appclust to-appclust-light',
        'fa-cookie': 'from-appclust to-appclust-light',
        'fa-th-large': 'from-appclust to-appclust-light',
        'fa-building': 'from-appclust to-appclust-light',
        'fa-phone': 'from-appclust to-appclust-light',
        'fa-file-alt': 'from-appclust to-appclust-light'
      };
      const iconColor = iconColors[icon] || 'from-appclust to-appclust-light';
      
      return `
        <div class="article-card bg-white rounded-xl border border-slate-200/60 p-6 cursor-pointer hover:shadow-2xl hover:border-appclust/30 hover:-translate-y-1 group transition-all duration-300" data-kb-id="${article.kb_id}">
          <div class="flex items-start gap-4 mb-4">
            <div class="flex-shrink-0 w-14 h-14 rounded-xl bg-gradient-to-br ${iconColor} flex items-center justify-center text-white text-xl shadow-lg group-hover:scale-110 group-hover:shadow-xl transition-all duration-300">
              <i class="${icon}"></i>
            </div>
            <h3 class="text-lg font-semibold text-slate-900 group-hover:text-appclust transition-colors flex-1 leading-snug">${article.title}</h3>
          </div>
          <div class="flex items-center justify-between pt-4 border-t border-slate-100">
            <a href="#article/${article.kb_id}" class="text-appclust hover:text-appclust-dark font-semibold text-sm flex items-center gap-2 group-hover:gap-3 transition-all" onclick="event.preventDefault(); event.stopPropagation(); handleArticleClick('${article.kb_id}');">
              Read Article
              <i class="fas fa-arrow-right text-xs group-hover:translate-x-1 transition-transform"></i>
            </a>
            ${article.external_link ? `
              <a href="${article.external_link}" class="text-slate-400 hover:text-appclust transition-colors" target="_blank" onclick="event.stopPropagation()">
                <i class="fas fa-comments"></i>
              </a>
            ` : ''}
          </div>
        </div>
      `;
    }

    // Get icon based on tags
    function getArticleIcon(tags) {
      if (!tags) return 'fas fa-file-alt';
      const tagStr = tags.toLowerCase();
      if (tagStr.includes('login') || tagStr.includes('sign')) return 'fas fa-sign-in-alt';
      if (tagStr.includes('rfid')) return 'fas fa-id-card';
      if (tagStr.includes('invoice') || tagStr.includes('bill')) return 'fas fa-file-invoice';
      if (tagStr.includes('product') || tagStr.includes('item')) return 'fas fa-box';
      if (tagStr.includes('search')) return 'fas fa-search';
      if (tagStr.includes('report')) return 'fas fa-chart-bar';
      if (tagStr.includes('cookie')) return 'fas fa-cookie';
      if (tagStr.includes('module')) return 'fas fa-th-large';
      if (tagStr.includes('company') || tagStr.includes('organization')) return 'fas fa-building';
      if (tagStr.includes('phone') || tagStr.includes('mobile')) return 'fas fa-phone';
      return 'fas fa-file-alt';
    }

    // Calculate reading time
    function calculateReadingTime(text) {
      const wordsPerMinute = 200;
      const wordCount = text.split(/\s+/).length;
      const minutes = Math.ceil(wordCount / wordsPerMinute);
      return `${minutes} min read`;
    }

    // Find related articles based on tags and title
    function findRelatedArticles(currentArticle, limit = 3) {
      if (!currentArticle || !currentArticle.tags) return [];
      
      const currentTags = currentArticle.tags.toLowerCase().split(',').map(t => t.trim());
      const currentTitleWords = currentArticle.title.toLowerCase().split(/\s+/);
      
      const scored = articles
        .filter(a => a.kb_id !== currentArticle.kb_id)
        .map(article => {
          let score = 0;
          const articleTags = (article.tags || '').toLowerCase().split(',').map(t => t.trim());
          const articleTitleWords = article.title.toLowerCase().split(/\s+/);
          
          // Score based on matching tags
          currentTags.forEach(tag => {
            if (articleTags.some(at => at.includes(tag) || tag.includes(at))) {
              score += 3;
            }
          });
          
          // Score based on matching title words
          currentTitleWords.forEach(word => {
            if (word.length > 3 && articleTitleWords.includes(word)) {
              score += 1;
            }
          });
          
          return { article, score };
        })
        .filter(item => item.score > 0)
        .sort((a, b) => b.score - a.score)
        .slice(0, limit)
        .map(item => item.article);
      
      return scored;
    }

    // Create sidebar article card
    function createSidebarArticleCard(article) {
      return `
        <a href="#article/${article.kb_id}" class="block group p-4 rounded-xl border border-slate-200 hover:border-appclust/50 hover:bg-slate-50 transition-all" onclick="event.preventDefault(); navigateToArticle('${article.kb_id}');">
          <h4 class="font-semibold text-slate-900 group-hover:text-appclust transition-colors mb-2 line-clamp-2">${article.title}</h4>
          <div class="flex items-center gap-2 text-xs text-slate-500">
            <i class="fas fa-clock"></i>
            <span>${calculateReadingTime(article.title)}</span>
          </div>
        </a>
      `;
    }

    // Navigate to article (using hash routing)
    function navigateToArticle(kbId) {
      // Set hash - this will trigger hashchange event which calls handleRoute
      // So we don't need to call openArticle directly here
      window.location.hash = `#article/${kbId}`;
    }

    // Handle article click
    function handleArticleClick(kbId) {
      navigateToArticle(kbId);
    }

    // Open article page
    async function openArticle(kbId) {
      const article = articles.find(a => a.kb_id === kbId);
      if (!article) {
        // Article not found, redirect to home
        navigateHome();
        return;
      }
      
      // Show article page, hide homepage
      document.getElementById('homePage').classList.add('hidden');
      document.getElementById('articlePage').classList.remove('hidden');
      
      // Scroll to top
      window.scrollTo(0, 0);

      // Update page title and meta tags for SEO
      const fullUrl = window.location.origin + window.location.pathname + `#article/${kbId}`;
      document.title = `${article.title} | AppClust Support`;
      const metaDescription = document.querySelector('meta[name="description"]');
      if (metaDescription) {
        metaDescription.content = `${article.title} - Learn how to ${article.title.toLowerCase()} with AppClust. Step-by-step guide and tutorials.`;
      }
      const ogTitle = document.querySelector('meta[property="og:title"]');
      if (ogTitle) {
        ogTitle.content = `${article.title} | AppClust Support`;
      }
      const ogUrl = document.querySelector('meta[property="og:url"]');
      if (ogUrl) {
        ogUrl.content = fullUrl;
      }

      // Set article title and breadcrumb
      document.getElementById('articleTitle').textContent = article.title;
      document.getElementById('articleBreadcrumb').textContent = article.title;
      
      // Show loading state
      document.getElementById('articleContent').innerHTML = `
        <div class="text-center py-12">
          <div class="inline-block w-10 h-10 border-4 border-appclust border-t-transparent rounded-full animate-spin mb-4"></div>
          <p class="text-slate-600">Loading content...</p>
        </div>
      `;

      try {
        let url = article.url;
        if (!url.startsWith('http')) {
          // Use absolute path for markdown files
          url = `/files/${kbId}.md`;
        }
        
        const response = await fetch(url);
        if (!response.ok) throw new Error('Failed to load');
        
        const markdown = await response.text();
        const html = marked.parse(markdown);
        
        // Fix image URLs to use absolute paths
        let processedHtml = html;
        
        // Replace absolute image URLs with absolute paths (to work with /article/ routes)
        processedHtml = processedHtml.replace(
          /src="(https?:\/\/[^"]*\/images\/[^"]+)"/gi,
          (match, url) => {
            const filename = url.split('/').pop();
            return `src="/images/${filename}"`;
          }
        );
        
        // Also fix any relative image paths that might already be in the markdown
        processedHtml = processedHtml.replace(
          /src="images\/([^"]+)"/gi,
          (match, filename) => {
            return `src="/images/${filename}"`;
          }
        );
        
        // Update article content
        document.getElementById('articleContent').innerHTML = `<div class="markdown-content">${processedHtml}</div>`;
        
        // Calculate and set reading time
        const readingTime = calculateReadingTime(markdown);
        document.getElementById('articleReadTime').textContent = readingTime;
        
        // Ensure images are properly sized and handle loading errors
        document.getElementById('articleContent').querySelectorAll('img').forEach(img => {
          img.style.maxWidth = '100%';
          img.style.height = 'auto';
          img.onerror = function() {
            this.alt = 'Image not found';
            this.style.border = '2px dashed #e2e8f0';
            this.style.padding = '2rem';
            this.style.backgroundColor = '#f8fafc';
          };
        });

        // Set up external link
        const externalLink = document.getElementById('articleExternalLink');
        if (article.external_link) {
          externalLink.href = article.external_link;
          externalLink.style.display = 'inline-flex';
        } else {
          externalLink.style.display = 'none';
        }

        // Set up share buttons
        const currentUrl = window.location.origin + window.location.pathname + `#article/${kbId}`;
        const shareText = encodeURIComponent(`Check out this guide: ${article.title}`);
        
        document.getElementById('shareTwitter').href = `https://twitter.com/intent/tweet?url=${encodeURIComponent(currentUrl)}&text=${shareText}`;
        document.getElementById('shareLinkedIn').href = `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(currentUrl)}`;
        document.getElementById('shareFacebook').href = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(currentUrl)}`;
        
        document.getElementById('copyLink').addEventListener('click', async () => {
          try {
            await navigator.clipboard.writeText(currentUrl);
            const btn = document.getElementById('copyLink');
            const originalHTML = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-check"></i>';
            btn.classList.add('bg-green-500');
            setTimeout(() => {
              btn.innerHTML = originalHTML;
              btn.classList.remove('bg-green-500');
            }, 2000);
          } catch (err) {
            console.error('Failed to copy:', err);
          }
        });

        // Load related articles
        const relatedArticles = findRelatedArticles(article, 3);
        const relatedContainer = document.getElementById('relatedArticles');
        if (relatedArticles.length > 0) {
          relatedContainer.innerHTML = relatedArticles.map(a => createSidebarArticleCard(a)).join('');
          document.getElementById('relatedArticlesSection').style.display = 'block';
        } else {
          document.getElementById('relatedArticlesSection').style.display = 'none';
        }

        // Load recent articles in sidebar
        const recentArticles = articles.slice(0, 3);
        document.getElementById('sidebarRecentArticles').innerHTML = recentArticles.map(a => createSidebarArticleCard(a)).join('');

      } catch (error) {
        console.error('Error loading article:', error);
        document.getElementById('articleContent').innerHTML = `
          <div class="text-center py-12">
            <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-red-100 mb-4">
              <i class="fas fa-exclamation-triangle text-red-600 text-2xl"></i>
            </div>
            <h3 class="text-xl font-bold text-slate-900 mb-2">Unable to load article</h3>
            <p class="text-slate-600">The article content could not be loaded. Please try again later.</p>
          </div>
        `;
      }
    }

    // Navigate to home
    function navigateHome() {
      window.location.hash = '';
      document.getElementById('homePage').classList.remove('hidden');
      document.getElementById('articlePage').classList.add('hidden');
      document.title = 'Help Center | AppClust Support';
      window.scrollTo(0, 0);
      
      // Preserve search query if there is one
      const searchInput = document.getElementById('searchInput');
      if (searchInput && searchQuery) {
        searchInput.value = searchQuery;
      }
    }

    // Handle routing (hash-based)
    function handleRoute() {
      const hash = window.location.hash;
      
      if (hash.startsWith('#article/')) {
        const kbId = hash.replace('#article/', '').split('?')[0].split('#')[0];
        if (kbId) {
          // Wait for articles to load if needed
          if (articles.length === 0) {
            loadArticles().then(() => {
              openArticle(kbId);
            });
          } else {
            openArticle(kbId);
          }
        } else {
          navigateHome();
        }
      } else {
        navigateHome();
      }
    }

    // Search functionality
    const searchInput = document.getElementById('searchInput');
    if (searchInput) {
      searchInput.addEventListener('input', (e) => {
        searchQuery = e.target.value;
        renderSearchResults();
      });
      
      // Keyboard shortcut: Cmd/Ctrl + K to focus search
      document.addEventListener('keydown', (e) => {
        if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
          e.preventDefault();
          searchInput.focus();
          searchInput.select();
        }
        // Escape to clear search when focused
        if (e.key === 'Escape' && document.activeElement === searchInput) {
          searchInput.value = '';
          searchQuery = '';
          renderSearchResults();
        }
      });
    }

    // Contact support button
    document.getElementById('contactSupportBtn').addEventListener('click', () => {
      document.getElementById('whatsappModal').classList.remove('hidden');
      document.getElementById('whatsappModal').classList.add('flex');
      document.body.style.overflow = 'hidden';
    });

    // WhatsApp Modal Functions
    const whatsappButton = document.getElementById('whatsappButton');
    const whatsappModal = document.getElementById('whatsappModal');
    const closeWhatsappModal = document.getElementById('closeWhatsappModal');

    whatsappButton.addEventListener('click', () => {
      whatsappModal.classList.remove('hidden');
      whatsappModal.classList.add('flex');
      document.body.style.overflow = 'hidden';
    });

    closeWhatsappModal.addEventListener('click', () => {
      whatsappModal.classList.add('hidden');
      whatsappModal.classList.remove('flex');
      document.body.style.overflow = '';
    });

    whatsappModal.addEventListener('click', (e) => {
      if (e.target.id === 'whatsappModal') {
        whatsappModal.classList.add('hidden');
        whatsappModal.classList.remove('flex');
        document.body.style.overflow = '';
      }
    });

    // Escape key to close modals
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        if (!whatsappModal.classList.contains('hidden')) {
          whatsappModal.classList.add('hidden');
          whatsappModal.classList.remove('flex');
          document.body.style.overflow = '';
        }
      }
    });

    // Handle hash changes (browser back/forward, direct navigation)
    window.addEventListener('hashchange', () => {
      handleRoute();
    });

    // Handle sidebar article clicks (delegated event listener)
    document.addEventListener('click', (e) => {
      const articleLink = e.target.closest('a[href^="#article/"]');
      if (articleLink && !e.target.closest('.article-card')) {
        e.preventDefault();
        const href = articleLink.getAttribute('href');
        const kbId = href.replace('#article/', '');
        navigateToArticle(kbId);
      }
      if (e.target.closest('a[href="#"]') || e.target.closest('a[href="/"]')) {
        e.preventDefault();
        navigateHome();
      }
    });

    // Initialize
    loadArticles();
    
    // Handle initial route on page load (check hash)
    handleRoute();
  </script>
</body>
</html>
